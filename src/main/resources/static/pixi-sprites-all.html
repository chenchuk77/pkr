<!doctype html>
<meta charset="utf-8">
<title>Make a sprite from an image</title>
<body>
<script src="pixi.min.js"></script>
<script>


    let card_Ks = {
        name: 'Ks',
        file: 'cards/king_of_spades.png'
    };
    let card_Qh = {
        name: 'Qh',
        file: 'cards/queen_of_hearts.png'
    };
    let card_5d = {
        name: '5d',
        file: 'cards/5_of_diamonds.png'
    };
    let cards = [card_Ks, card_Qh, card_5d];

    var player = {
        name: 'avi',
        cards: []
    };

    console.log("before: " + player.cards);
    player.cards[0] = cards[0];
    player.cards[1] = cards[1];
    console.log("before: " + player.cards);

    //Aliases
    let Application = PIXI.Application,
        Container = PIXI.Container,
        loader = PIXI.loader,
        resources = PIXI.loader.resources,
        TextureCache = PIXI.utils.TextureCache,
        Sprite = PIXI.Sprite;
    //Create a Pixi Application
    let app = new Application({
            width: 256,
            height: 256,
            antialiasing: true,
            transparent: false,
            resolution: 1
        }
    );
    var imageFiles = [
        "cards/10_of_clubs.png",
        "cards/10_of_diamonds.png",
        "cards/10_of_hearts.png",
        "cards/10_of_spades.png",
        "cards/2ndPokerTable.png",
        "cards/2_of_clubs.png",
        "cards/2_of_diamonds.png",
        "cards/2_of_hearts.png",
        "cards/2_of_spades.png",
        "cards/3_of_clubs.png",
        "cards/3_of_diamonds.png",
        "cards/3_of_hearts.png",
        "cards/3_of_spades.png",
        "cards/4_of_clubs.png",
        "cards/4_of_diamonds.png",
        "cards/4_of_hearts.png",
        "cards/4_of_spades.png",
        "cards/5_of_clubs.png",
        "cards/5_of_diamonds.png",
        "cards/5_of_hearts.png",
        "cards/5_of_spades.png",
        "cards/6_of_clubs.png",
        "cards/6_of_diamonds.png",
        "cards/6_of_hearts.png",
        "cards/6_of_spades.png",
        "cards/7_of_clubs.png",
        "cards/7_of_diamonds.png",
        "cards/7_of_hearts.png",
        "cards/7_of_spades.png",
        "cards/8_of_clubs.png",
        "cards/8_of_diamonds.png",
        "cards/8_of_hearts.png",
        "cards/8_of_spades.png",
        "cards/9_of_clubs.png",
        "cards/9_of_diamonds.png",
        "cards/9_of_hearts.png",
        "cards/9_of_spades.png",
        "cards/ace_of_clubs.png",
        "cards/ace_of_diamonds.png",
        "cards/ace_of_hearts.png",
        "cards/ace_of_spades.png",
        "cards/back.png",
        "cards/black_joker.png",
        "cards/cardback.gif",
        "cards/cardback.png",
        "cards/chip100.png",
        "cards/chip1.png",
        "cards/chip25.png",
        "cards/chip5.png",
        "cards/dealerbutton.png",
        "cards/jack_of_clubs.png",
        "cards/jack_of_diamonds.png",
        "cards/jack_of_hearts.png",
        "cards/jack_of_spades.png",
        "cards/king_of_clubs.png",
        "cards/king_of_diamonds.png",
        "cards/king_of_hearts.png",
        "cards/king_of_spades.png",
        "cards/outline.png",
        "cards/poker_table.png",
        "cards/queen_of_clubs.png",
        "cards/queen_of_diamonds.png",
        "cards/queen_of_hearts.png",
        "cards/queen_of_spades.png",
        "cards/red_joker.png"
    ];
    //Add the canvas that Pixi automatically created for you to the HTML document
    document.body.appendChild(app.view);

    //load an image and run the `setup` function when it's done
    PIXI.loader
        .add(imageFiles)
        .load(setup);

    let card, state;

    function getSprite(cardCode){
        if (cardCode == 'Qh'){
            card = new Sprite(resources[card_Qh.file].texture);
            return card;
        }
        return null;
        // cardCode is Kh, Td, 3c etc
    }
    //This `setup` function will run when the image has loaded
    function setup() {
        card = getSprite("Qh");
        card.scale.y = 0.1;
        card.scale.x = 0.1;
        card.y = 96;
        card.vx = 0;
        card.vy = 0;
        app.stage.addChild(card);
        //Set the game state
        state = play;

        //Start the game loop
        app.ticker.add(delta => gameLoop(delta));
    }


    // //This `setup` function will run when the image has loaded
    // function setup() {
    //     //Create the `card` sprite
    //
    //     pcard = player.cards[0];
    //     card = new Sprite(resources[pcard.file].texture);
    //     card.scale.y = 0.1;
    //     card.scale.x = 0.1;
    //     card.y = 96;
    //     card.vx = 0;
    //     card.vy = 0;
    //     app.stage.addChild(card);
    //     //Set the game state
    //     state = play;
    //
    //     //Start the game loop
    //     app.ticker.add(delta => gameLoop(delta));
    // }

    // //This `setup` function will run when the image has loaded
    // function setup() {
    //     //Create the `card` sprite
    //     card = new Sprite(resources["cards/3_of_clubs.png"].texture);
    //     card.scale.y = 0.1;
    //     card.scale.x = 0.1;
    //     card.y = 96;
    //     card.vx = 0;
    //     card.vy = 0;
    //     app.stage.addChild(card);
    //     //Set the game state
    //     state = play;
    //
    //     //Start the game loop
    //     app.ticker.add(delta => gameLoop(delta));
    // }


    function gameLoop(delta){
        //Update the current game state:
        state(delta);
    }
    function play(delta) {
        //Move the cat 1 pixel to the right each frame
        card.vx = 1;
        card.x += card.vx;
    }


</script>
</body>

